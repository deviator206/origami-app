<!DOCTYPE html>
<!--[if IEMobile 7 ]>    <html class="no-js iem7"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!-->
<html class="no-js">
	<!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<title></title>

	</head>
	<body>

		<script type='text/javascript'>
		/*	var viewporter;
			(function() {

				var _viewporter;

				// initialize viewporter object
				viewporter = {

					// options
					forceDetection : false,

					// constants
					ACTIVE : (function() {

						// iPad's don't allow you to scroll away the UI of the browser
						if ((/ipad/i).test(navigator.userAgent)) {
							return false;
						}

						// WebOS has no touch events, but definitely the need for viewport normalization
						if ((/webos/i).test(navigator.userAgent)) {
							return true;
						}

						// touch enabled devices
						if ('ontouchstart' in window) {
							return true;
						}

						return false;

					})(),

					READY : false,

					// methods
					isLandscape : function() {
						return window.orientation === 90 || window.orientation === -90;
					},

					ready : function(callback) {
						window.addEventListener('viewportready', callback, false);
					},

					change : function(callback) {
						window.addEventListener('viewportchange', callback, false);
					},

					refresh : function() {
						if (_viewporter) {
							_viewporter.prepareVisualViewport();
						}
					},

					preventPageScroll : function() {

						// prevent page scroll if `preventPageScroll` option was set to `true`
						document.body.addEventListener('touchmove', function(event) {
							event.preventDefault();
						}, false);

						// reset page scroll if `preventPageScroll` option was set to `true`
						// this is used after showing the address bar on iOS
						document.body.addEventListener("touchstart", function() {
							_viewporter.prepareVisualViewport();
						}, false);

					}
				};

				// if we are on Desktop, no need to go further
				if (!viewporter.ACTIVE) {
					return;
				}

				// create private constructor with prototype..just looks cooler
				var _Viewporter = function() {

					var that = this;

					// Scroll away the header, but not in Chrome
					this.IS_ANDROID = /Android/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);

					var _onReady = function() {

						// scroll the shit away and fix the viewport!
						that.prepareVisualViewport();

						// listen for orientation change
						var cachedOrientation = window.orientation;
						window.addEventListener('orientationchange', function() {
							if (window.orientation !== cachedOrientation) {
								that.prepareVisualViewport();
								cachedOrientation = window.orientation;
							}
						}, false);

					};

					// listen for document ready if not already loaded
					// then try to prepare the visual viewport and start firing custom events
					if (document.readyState === 'loading') {
						document.addEventListener('DOMContentLoaded', function() {
							_onReady();
						}, false);
					} else {
						_onReady();
					}

				};

				_Viewporter.prototype = {

					getProfile : function() {

						if (viewporter.forceDetection) {
							return null;
						}

						for (var searchTerm in viewporter.profiles) {
							if (new RegExp(searchTerm).test(navigator.userAgent)) {
								return viewporter.profiles[searchTerm];
							}
						}
						return null;
					},

					postProcess : function() {

						// let everyone know we're finally ready
						viewporter.READY = true;

						this.triggerWindowEvent(!this._firstUpdateExecuted ? 'viewportready' : 'viewportchange');
						this._firstUpdateExecuted = true;

					},

					prepareVisualViewport : function() {

						var that = this;

						// if we're running in webapp mode (iOS), there's nothing to scroll away
						if (navigator.standalone) {
							return this.postProcess();
						}

						// maximize the document element's height to be able to scroll away the url bar
						document.documentElement.style.minHeight = '5000px';

						var startHeight = window.innerHeight;
						var deviceProfile = this.getProfile();
						var orientation = viewporter.isLandscape() ? 'landscape' : 'portrait';

						// try scrolling immediately
						window.scrollTo(0, that.IS_ANDROID ? 1 : 0);
						// Android needs to scroll by at least 1px

						// start the checker loop
						var iterations = 40;
						var check = window.setInterval(function() {

							// retry scrolling
							window.scrollTo(0, that.IS_ANDROID ? 1 : 0);
							// Android needs to scroll by at least 1px

							function androidProfileCheck() {
								return deviceProfile ? window.innerHeight === deviceProfile[orientation] : false;
							}

							function iosInnerHeightCheck() {
								return window.innerHeight > startHeight;
							}

							iterations--;

							// check iterations first to make sure we never get stuck
							if ((that.IS_ANDROID ? androidProfileCheck() : iosInnerHeightCheck()) || iterations < 0) {

								// set minimum height of content to new window height
								document.documentElement.style.minHeight = window.innerHeight + 'px';

								// set the right height for the body wrapper to allow bottom positioned elements
								document.getElementById('viewporter').style.position = 'relative';
								//document.getElementById('viewporter').style.height = window.innerHeight + 'px';

								clearInterval(check);

								// fire events, get ready
								that.postProcess();

							}

						}, 10);

					},

					triggerWindowEvent : function(name) {
						var event = document.createEvent("Event");
						event.initEvent(name, false, false);
						window.dispatchEvent(event);
					}
				};

				// initialize
				_viewporter = new _Viewporter();

			})();

			viewporter.profiles = {

				// Motorola Xoom
				'MZ601' : {
					portrait : 696,
					landscape : 1176
				},

				// Samsung Galaxy S, S2 and Nexus S
				'GT-I9000|GT-I9100|Nexus S' : {
					portrait : 508,
					landscape : 295
				},

				// Samsung Galaxy Pad
				'GT-P1000' : {
					portrait : 657,
					landscape : 400
				},

				// HTC Desire & HTC Desire HD
				'Desire_A8181|DesireHD_A9191' : {
					portrait : 533,
					landscape : 320
				}

			};*/

			/* STARTING POINT*/
			var _gMainApplication
			var documentPath = "Documents/";
			var imagesPath = "PublishingImages/";
			var selfPath = "../";
			function getAssetPath(sType, str) {
				var sTemp = selfPath;
				switch(sType) {
					case "docs":
						sTemp += "" + documentPath
						break;
					case "img":
						//console.log(' STR ' + str);
						str = str.replace("img/", "");
						sTemp += "" + imagesPath + "origami/"
						break;
				}
				sTemp += "" + str;
				return sTemp;
			}

			//var arrScriptTags = new Array('css/style_stc.css', 'js/lib/PxLoader.js', 'js/lib/PxLoaderImage.js', 'js/model.js', 'js/screens/loadingScreen.js', 'js/screens/splashScreen.js', 'js/screens/howtoplayScreen.js', 'js/screens/gameplayScreen.js', 'js/screens/levelEndScreen.js', 'js/screens/winnerScreen.js', 'js/application.js');
			var arrScriptTags = new Array('css/style_stc.css', 'js/app.js');
			var arrScriptIndex = 0;
			var arrDivNames = new Array('loading_script_tags', 'loadingScreen', 'splashScreen', 'howtoplayScreen', 'questionScreen', 'sidePanel', 'levelEndScreen', 'winnerScreen', 'overlayScreen', 'overlayScreen_ForQuestion')
			function makeAllInvisible() {
				for (var i = 0; i < arrDivNames.length; i++)
					document.getElementById(arrDivNames[i]).style.display = 'none'
			}

			function startLoadingAssets() {
				if (arrScriptIndex == 0) {
					//makeAllInvisible();
					document.getElementById('appContainer').style.display = "none"
					document.getElementById('loading_script_tags').style.display = "block"
				}

				if (arrScriptIndex < arrScriptTags.length) {
					if (arrScriptIndex < 1) {
						AddCSS(getAssetPath("docs", arrScriptTags[arrScriptIndex]));
						arrScriptIndex++;
						startLoadingAssets();
					} else {
						AddScript(getAssetPath("docs", arrScriptTags[arrScriptIndex]), startLoadingAssets);
						arrScriptIndex++;
					}

				} else {
					document.getElementById('appContainer').style.display = "block"
					document.getElementById('loading_script_tags').style.display = "none"
					_gMainApplication = new ApplicationWrapper();
					_gMainApplication.setUp({
						screenNames : arrDivNames
					})
					_gMainApplication.nextTransition();

				}
			}

			function AddCSS(url, callback) {
				var script = null;
				script = document.createElement('link');
				script.href = url;
				script.rel = "stylesheet";
				script.type = 'text/css';
				script.defer = false;

				if ( typeof callback != "undefined" && callback != null) {

					// IE only, connect to event, which fires when JavaScript is loaded
					script.onreadystatechange = function() {
						if (this.readyState == 'complete' || this.readyState == 'loaded') {
							this.onreadystatechange = this.onload = null;
							// prevent duplicate calls
							callback();
						}
					}
					// FireFox and others, connect to event, which fires when JavaScript is loaded
					script.onload = function() {
						this.onreadystatechange = this.onload = null;
						// prevent duplicate calls

						callback();
					};
				}

				var head = document.getElementsByTagName('head').item(0);
				head.appendChild(script);
			}

			function AddScript(url, callback) {
				var script = null;
				script = document.createElement('script');
				script.src = url;
				script.type = 'text/javascript';
				script.defer = false;

				if ( typeof callback != "undefined" && callback != null) {

					// IE only, connect to event, which fires when JavaScript is loaded
					script.onreadystatechange = function() {
						if (this.readyState == 'complete' || this.readyState == 'loaded') {
							this.onreadystatechange = this.onload = null;
							// prevent duplicate calls
							callback();
						}
					}
					// FireFox and others, connect to event, which fires when JavaScript is loaded
					script.onload = function() {
						this.onreadystatechange = this.onload = null;
						// prevent duplicate calls

						callback();
					};
				}

				var head = document.getElementsByTagName('head').item(0);
				head.appendChild(script);
			}


			window.addEventListener ? window.addEventListener("load", startLoadingAssets, false) : window.attachEvent && window.attachEvent("onload", startLoadingAssets);

		</script>
		<div id='viewporter' >
			<div class="outerDiv">
				<div class="mainDiv">
					<div id="loading_script_tags" style="width:905px;
					height:600px;
					margin:0 auto;
					color:white;
					background-color:black;">
						<span style="margin-left: 325px;
						margin-top: 240px;
						position: absolute;
						font-size: 50px;">Initializing...</span>

					</div>

					<div id="appContainer">
						<div id="loadingScreen" style="display: block;margin-left: 240px;margin-top: 200px;"></div>
						<div id="splashScreen"></div>
						<div id="howtoplayScreen"></div>
						<div id="questionScreen"></div>
						<div id="levelEndScreen"></div>
						<div id="winnerScreen"></div>

					</div>

				</div>
				<div id="sidePanel"></div>
				<div id="overlayScreen" class="overlayScreenCSS">
					<div id="opaqueScreen_bg" class="opaqueScreenCSS"></div>
					<div id="opaqueScreen" class="opaqueScreenCSS_1">
						-1
					</div>
					<div id="clickOverlayClose" class="closeOverlay" ></div>
				</div>
				<div id="overlayScreen_ForQuestion" class="overlayScreenCSS_ForQuestion">
					<div id="opaqueScreen_ForQuestion" class="opaqueScreenCSS_ForQuestion">
						Please try again...
					</div>
					<div id="clickQuestionTryAgain" class="closeOverlay_ForQuestion">
						Close X
					</div>
				</div>
			</div>

		</div>
	</body>
</html>
